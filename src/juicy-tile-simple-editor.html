﻿<link rel="import" href="../../polymer/polymer.html" />
<link rel="import" href="../../juicy-highlight/src/juicy-highlight.html" />
<link rel="import" href="../../juicy-popover/src/juicy-popover.html" />
<link rel="import" href="../../juicy-color-picker/src/juicy-color-picker.html" />
<link rel="import" href="./juicy-border-picker.html" />

<dom-module id="juicy-tile-simple-editor">
    <template>
        <style>
            :host {
                position: fixed;
                top: 0px;
                left: 0px;
                width: calc(100% - 220px);
                box-sizing: border-box;
                background-color: #252526;
                color: white;
                overflow: visible;
            }

            .editor-form {
                overflow: auto;
                padding: 5px 10px 0px 10px;
                border-bottom: 1px solid #C0C0C0;
            }

            .editor-form .editor-form-section {
                float: left;
                margin-right: 20px;
                margin-bottom: 5px;
            }

            .editor-form .btn {
                border: 0px;
                cursor: pointer;
                padding: 10px;
                border-radius: 2px;
                outline: none;
                min-width: 30px;
                text-align: center;
                background-color: #CCCCCC;
                line-height: normal;
                font-size: 13.3px;
                font-family: Arial;
                display: inline-block;
                box-sizing: border-box;
                height: 35px;
                vertical-align: middle;
            }

            .editor-form .btn:hover {
                background-color: #EEEEEE;
            }

            .editor-form .btn-radio {
                background-color: #F0F0F0;
            }

            .editor-form .btn-radio:hover {
                background-color: #E0E0E0;
            }

            .editor-form .btn-radio.active {
                background-color: #BBBBBB;
            }

            .editor-form .btn[disabled],
            .editor-form .btn-radio[disabled],
            .editor-form .btn-radio:hover[disabled] {
                cursor: not-allowed;
                color: #CCCCCC;
                background-color: #F0F0F0;
            }

            .editor-form label.btn,
            .editor-form label.btn:hover {
                cursor: default;
                background-color: #cccccc;
                color: black;
                padding-top: 2px;
                padding-bottom: 2px;
                font-size: 10px;
                white-space: nowrap;
            }

            .editor-form label.btn span {
                display: block;
                margin-bottom: 1px;
            }

            .editor-form label.btn input {
                width: 50px;
            }

            .editor-form label.btn .btn-range {
                display: inline-block;
                margin: 0px;
                height: 19px;
                width: 19px;
                margin-left: -2px;
            }

            .editor-form .editor-form-section .btn-range {
                background-color: white;
                width: 20px;
                height: 20px;
                border-radius: 0px;
                padding: 0px;
                min-width: 0px;
                display: block;
                margin-top: 1px;
                border: 1px solid #C0C0C0;
                cursor: pointer;
            }

            .editor-form .editor-form-section .btn-range:hover {
                background-color: #F0F0F0;
            }

            .editor-form .editor-form-section .btn-range[disabled],
            .editor-form .editor-form-section .btn-range[disabled]:hover {
                background-color: white;
                color: #C0C0C0;
                cursor: not-allowed;
            }

            .editor-form .editor-form-section label.alert {
                color: red;
                background-color: white;
                padding: 5px;
                border-radius: 2px;
            }

            .editor-form .editor-form-section juicy-color-picker,
            .editor-form .editor-form-section juicy-border-picker {
                max-width: 120px;
                display: block;
            }

            .editor-form .editor-form-section juicy-popover div.popup {
                background-color: #C0C0C0;
                color: black;
                padding: 5px;
                border: 1px solid #252526;
            }

            .editor-form .editor-form-section .btn .background,
            .editor-form .editor-form-section .btn .outline {
                display: block;
                padding: 3px;
                margin: -3px;
                border-radius: 2px;
            }

            .editor-form .editor-form-section div.popup label.editor-form-value {
                display: flex;
                margin: 0px 0px 5px -2px;
            }

            .editor-form .editor-form-section div.popup label.editor-form-value input {
                display: block;
                width: 82px;
                font-size: 12px;
                padding: 2px;
                box-sizing: border-box;
            }

            .editor-form .editor-form-section .radio-group {
                margin-bottom: 10px;
            }

            .editor-form .editor-form-section .radio-group .radio-group-caption {
                font-weight: bold;
            }

            .editor-form .editor-form-section .radio-group label.radio {
                cursor: pointer;
                display: block;
            }

            .editor-tree {
                position: fixed;
                height: 100vh;
                right: 0px;
                width: 220px;
                top: 0px;
                background-color: #252526;
                box-sizing: border-box;
                padding: 0px;
                font-size: 13px;
                border-left: 1px solid #C0C0C0;
            }

            .editor-tree div.editor-tree-item {
                padding: 2px 10px;
                cursor: pointer;
            }

            .editor-tree div.editor-tree-item:hover {
                background-color: #444444;
            }

            .editor-tree div.editor-tree-item.selected {
                background-color: #01629E;
            }

            .editor-tree .editor-tree-caption {
                padding: 5px 10px;
                border-bottom: 1px solid #C0C0C0;
                height: 46px;
                box-sizing: border-box;
            }

            .editor-breadcrumb {
                padding: 0px 10px;
                border-bottom: 1px solid #C0C0C0;
                font-size: 12px;
                color: #C0C0C0;
            }

            .editor-breadcrumb a {
                color: inherit;
                text-decoration: none;
                margin-right: 5px;
            }

            .editor-breadcrumb a:hover {
                color: white;
            }
        </style>

        <div class="editor-form">
            <div class="editor-form-section">
                <button type="button" class="btn" on-click="saveSetup" disabled$="{{!hasChanges}}">Save</button>
                <button type="button" class="btn" on-click="resetSetup">Reset</button>
            </div>
            <!-- Hiding the media screen buttons till we support multiple break points on the juicy-tile-list/grid/table level -->
            <div class="editor-form-section" style="display: none;">
                <template is="dom-repeat" items="{{mediaScreenRanges}}">
                    <button type="button" class$="{{getRadioButtonCss(mediaScreen, item)}}" item="{{item}}" on-click="selectMediaScreen" disabled$="{{!selectedList}}">{{item.name}}</button>
                </template>
            </div>
            <div class="editor-form-section">
                <label>Width:</label>
                <template is="dom-repeat" items="{{widthRanges}}">
                    <button type="button" class$="{{getRadioButtonCss(width, item)}}" item="{{item}}" on-click="selectWidth" disabled$="{{!selectedTiles.length}}">{{item.name}}</button>
                </template>
            </div>
            <div class="editor-form-section">
                <label>Visible:</label>
                <button type="button" class$="{{getRadioButtonCss(visible, 1)}}" on-click="selectVisible" data-value="1" disabled$="{{!selectedTiles.length}}">Yes</button>
                <button type="button" class$="{{getRadioButtonCss(visible, 0)}}" on-click="selectVisible" data-value="0" disabled$="{{!selectedTiles.length}}">No</button>
            </div>
            <div class="editor-form-section">
                <label>Position:</label>
                <button type="button" class="btn" on-click="moveUp" disabled$="{{!selectedTiles.length}}">Up</button>
                <button type="button" class="btn" on-click="moveDown" disabled$="{{!selectedTiles.length}}">Down</button>
            </div>
            <template is="dom-if" if="{{showMore}}">
                <div class="editor-form-section">
                    <juicy-popover handleSelector="button.btn" expandableSelector="div.popup">
                        <button type="button" class="btn" disabled$="{{!selectedTiles.length}}">
                            <span class="background" style$="{{getBackgroundStyle(background)}}">Fill</span>
                        </button>
                        <div class="popup">
                            <label class="editor-form-value">
                                <input type="text" value="{{oversize::input}}" placeholder="Oversize" />
                                <button type="button" class="btn btn-range" on-click="oversizePlus">+</button>
                                <button type="button" class="btn btn-range" on-click="oversizeMinus">-</button>
                            </label>
                            <juicy-color-picker pallete="flat" value="{{background::change}}"></juicy-color-picker>
                        </div>
                    </juicy-popover>
                    
                    <juicy-popover handleSelector="button.btn" expandableSelector="div.popup">
                        <button type="button" class="btn" disabled$="{{!selectedTiles.length}}">
                            <span class="outline" style$="{{getOutlineStyle(outline)}}">Outline</span>
                        </button>
                        <div class="popup">
                            <juicy-border-picker border-value="{{outline}}"></juicy-border-picker>
                        </div>
                    </juicy-popover>
                </div>
                <div class="editor-form-section">
                    <button type="button" class="btn" disabled$="{{!selectedTiles.length}}" on-click="packGroup">
                        Group
                    </button>
                    <button type="button" class="btn" disabled$="{{!selectedTiles.length}}" on-click="unpackGroup">
                        Ungroup
                    </button>
                </div>
                <div class="editor-form-section">
                    <label class="btn">
                        <span>Gutter</span>
                        <input type="text" value="{{gutter::change}}" disabled$="{{!getIsGroupSelection(selectedTiles, selectedTiles.length)}}" />
                        <button class="btn-range" disabled$="{{!getIsGroupSelection(selectedTiles, selectedTiles.length)}}" on-click="gutterPlus">+</button>
                        <button class="btn-range" disabled$="{{!getIsGroupSelection(selectedTiles, selectedTiles.length)}}" on-click="gutterMinus">-</button>
                    </label>
                </div>
                <template is="dom-if" if="{{showAdvanced}}">
                    <div class="editor-form-section">
                        <label class="btn">
                            <span>Own scope</span>
                            <input type="checkbox" checked="{{tightGroup::change}}" />
                        </label>
                        <juicy-popover handleSelector="button.btn" expandableSelector="div.popup">
                            <button type="button" class="btn" disabled$="{{!getIsGroupSelection(selectedTiles, selectedTiles.length)}}">
                                Direction
                            </button>
                            <div class="popup">
                                <div class="radio-group">
                                    <div class="radio-group-caption">Elements flow</div>
                                    <label class="radio">
                                        <input type="radio" name="direction" checked />
                                        <span>Horizontal</span>
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="direction" />
                                        <span>Vertical</span>
                                    </label>
                                </div>
                                <div class="radio-group">
                                    <div class="radio-group-caption">From</div>
                                    <label class="radio">
                                        <input type="radio" name="left-right" checked />
                                        <span>Left to right</span>
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="left-right" />
                                        <span>Right to left</span>
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="top-bottom" checked />
                                        <span>Top to bottom</span>
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="top-bottom" />
                                        <span>Bottom to top</span>
                                    </label>
                                </div>
                            </div>
                        </juicy-popover>
                        <juicy-popover handleSelector="button.btn" expandableSelector="div.popup">
                            <button type="button" class="btn" disabled$="{{!getIsGroupSelection(selectedTiles, selectedTiles.length)}}">Html</button>
                            <div class="popup">
                                <textarea></textarea>
                            </div>
                        </juicy-popover>
                    </div>
                    <div class="editor-form-section">
                        <label class="btn">
                            <span>Width</span>
                            <input type="text" value="{{gutter::change}}" disabled$="{{!selectedTiles.length}}" />
                            <button class="btn-range" disabled$="{{!selectedTiles.length}}" on-click="">+</button>
                            <button class="btn-range" disabled$="{{!selectedTiles.length}}" on-click="">-</button>
                        </label>
                        <label class="btn">
                            <span>Height</span>
                            <input type="text" value="{{gutter::change}}" disabled$="{{!selectedTiles.length}}" />
                            <button class="btn-range" disabled$="{{!selectedTiles.length}}" on-click="">+</button>
                            <button class="btn-range" disabled$="{{!selectedTiles.length}}" on-click="">-</button>
                        </label>
                    </div>
                    <div class="editor-form-section">
                        <juicy-popover handleSelector="button.btn" expandableSelector="div.popup">
                            <button type="button" class="btn">Source</button>
                            <div class="popup">
                                <textarea></textarea>
                            </div>
                        </juicy-popover>
                    </div>
                </template>
            </template>
            <div class="editor-form-section">
                <template is="dom-if" if="{{showMore}}">
                    <button type="button" class="btn" on-click="toggleAdvanced">
                        Advanced
                    </button>
                </template>
                <button type="button" class="btn" on-click="toggleMore">
                    <template is="dom-if" if="{{showMore}}">
                        <span>Less</span>
                    </template>
                    <template is="dom-if" if="{{!showMore}}">
                        <span>More</span>
                    </template>
                </button>
            </div>
            <template is="dom-if" if="{{message}}">
                <div class="editor-form-section">
                    <label class="alert">{{message}}</label>
                </div>
            </template>
        </div>

        <div class="editor-tree">
            <div class="editor-tree-caption">
                <template is="dom-if" if="{{selectedTiles.length}}">

                    <b>
                        <span>{{selectedTiles.length}}</span>
                        <span>{{getSelectedTilesCaption(selectedTiles.length)}}</span>
                    </b>
                    <label>selected</label>
                </template>
            </div>
            <template is="dom-repeat" items="{{selectedScopeItems}}">
                <div class$="{{getTreeItemCss(selectedTiles.length, item)}}" on-click="selectTreeItem" item="{{item}}">
                    <span>{{item.itemName}}</span>
                    <template is="dom-if" if="{{getIsScopable(item)}}">
                        <a href="javascript:" on-click="selectScopeItem" item="{{item}}">...</a>
                    </template>
                </div>
            </template>
        </div>

        <template is="dom-if" if="{{breadcrumb.length}}">
            <div class="editor-breadcrumb">
                <template is="dom-repeat" items="{{breadcrumb}}">
                    <a href="javascript:" on-click="selectCrumbItem" item="{{item}}">
                        <span>&gt;</span>
                        <span>{{item.name}}</span>
                    </a>
                </template>
            </div>
        </template>

        <juicy-highlight id="highlightTileRollover" strokewidth="1" strokecolor="#1E90FF" strokeoffset="2" fill="rgba(0, 191, 255, 0.2)"></juicy-highlight>
        <juicy-highlight id="highlightTileSelected" strokewidth="2" strokecolor="#1E90FF" strokeoffset="2"></juicy-highlight>
        <juicy-highlight id="highlightScopeSelected" strokewidth="1" strokecolor="#C0C0C0" strokeoffset="2" overlay></juicy-highlight>
    </template>
    <script src="juicy-tile-simple-editor.js"></script>
</dom-module>