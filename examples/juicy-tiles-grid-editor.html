<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>&lt;juicy-tile-editor&gt; for grid</title>
  <link rel="stylesheet" href="http://juicy.github.io/github-markdown-css/github-markdown.css">

  <!-- Importing Web Component's Polyfill 
  <script src="../../platform/platform.js"></script>
  <link rel="import" href="../../polymer/polymer.html">-->

  <!-- Importing Custom Elements -->
  <link rel="import" href="../../juicy-tile-grid/src/juicy-tile-grid.html">
  <link rel="import" href="../../juicy-tiles-setup-sync/src/juicy-tiles-setup-sync.html">
  <link rel="import" href="../src/juicy-tile-editor.html">

  <link rel="import" href="../../core-localstorage/core-localstorage.html">

  <style>
    body {
      padding: 50px 20px 20px 20px;
    }
    *{
      margin:0px;
      padding:0px;
    }
    juicy-tile-grid{
      /*width: 300px;
      height: 150px;*/
      display: block;
      box-shadow:     inset 0px 0px 10px 0px rgba(50, 50, 50, 0.6);
    }
    .markdown-body>juicy-tile-grid{
      padding: 1em;
      margin: 2em 0 2em 200px;
    }
    juicy-tile-grid>*{
      box-shadow:         0px 0px 10px 0px rgba(50, 50, 50, 0.75);
    }
    juicy-tile-grid>:first-child {
      background:lightgreen;
    }

    juicy-tile-grid>:nth-child(2) {
      /* background:lightblue; */
      background: rgba(173, 216, 230, 0.8);
    }

    juicy-tile-grid>:nth-child(3) {
      /*background:yellow;*/
      background: rgba(255, 255, 0, 0.8);
      overflow:auto;
    }

    juicy-tile-grid>:nth-child(4) {
      background:gray;
      overflow:auto;
    }

    juicy-tile-grid>:nth-child(5) {
      background:orange;
      max-height: 100px;
      overflow:auto;
    }

    #aboveOverlay {
      position: fixed;
      z-index: 100;
    }
    .markdown-body div h4,
    .markdown-body juicy-tile-grid div p{
      margin: 0;
    }
    iframe{float:right}
  </style>
</head>
<body>
<article class="markdown-body">
    <iframe src="http://ghbtns.com/github-btn.html?user=juicy&amp;repo=juicy-tile-editor&amp;type=fork&amp;count=true&amp;size=medium"
allowtransparency="true" frameborder="0" scrolling="0" width="90" height="30"></iframe>
    <iframe src="http://ghbtns.com/github-btn.html?user=juicy&amp;repo=juicy-tile-editor&amp;type=watch&amp;count=true&amp;size=medium"
  allowtransparency="true" frameborder="0" scrolling="0" width="90" height="30"></iframe>

<template bind>
  <p>Press Ctrl or Command on your keyboard and move your mouse over an item to edit</p>
  <label><input type="checkbox" checked="{{editingMode}}"> Show editor ({{editingMode}})</label>
  <template if="{{editingMode}}">
    <div id="aboveOverlay">
      <juicy-tile-editor selectionMode></juicy-tile-editor>
    </div>
      <script>
          document.querySelector("juicy-tile-editor").addEventListener("juicy-tile-editor-close", function (e) {
              e.target.templateInstance.model.editingMode = false;
          });
      </script>
  </template>

  <core-localstorage name="juicy-tiles" value="{{setup}}"></core-localstorage>
  <juicy-tiles-setup-sync storedValue="{{setup}}"></juicy-tiles-setup-sync>
  <juicy-tile-grid id="st1" setup="[[setup]]">
    <div>0
        <p><code>widthFlexible: false</code> - Tile will have fixed size width, will not adapt to the container resize</p>
    </div>
    <div>
        <button>1</button>
        <p><code>widthFlexible: true</code> - Tile will have flex size width, will do adapt to the container resize</p>
    </div>
    <div>
      <h4>2</h4>
        <p>
            <code>heightFlexible: true</code>Dynamically change height after tile was packed.
            <button onclick="addMore( this )">Add more content</button>
            <div id="ieHierarchyRequestErrorWorkaround"></div>
        </p>
    </div>
    <section>
        <p>3: <code>widthFlexible: true</code></p>
    </section>
    <div>
        4
    </div>
    <div>
        5
    </div>
    <div>
      <h4>6</h4>
      Nested tiles 1:
      <juicy-tile-grid setup="{{setup2}}">
        <div>Subitem 0 </div>
        <div>
          <button>Subitem 1</button>
        </div>
        <div>
          <input value="Subitem2">
        </div>
        <section>Subitem 3</section>
      </juicy-tile-grid>
      <section>
        Nested tiles 2:
        <juicy-tile-grid setup="{{setup2}}">
          <div>Subitem 0 </div>
          <div>
            <button>Subitem 1</button>
          </div>
          <div>
            <input value="Subitem2">
          </div>
          <section>Subitem 3</section>
        </juicy-tile-grid>
      </section>
    </div>
    <juicy-tile-grid setup="{{setup2}}">
      <div>Subitem 0 </div>
      <div>
        <button>Subitem 1</button>
      </div>
      <div>
        <input value="Subitem2">
      </div>
      <section>Subitem 3</section>
    </juicy-tile-grid>
  </juicy-tile-grid>
</template>
<script type="text/javascript">
  // 011
  // 233
  // 2
  //
  // prioritized
  //
  // 110
  // 233
  // 2
  model = {
    editingMode: true,
    setup:{
      "gutter": 25,
      "items": [
        {
          "id": 0,
          "priority": 0.9,
          "height": 200,
          "width": 200
        },
        {
          "id": 1,
          "priority": 0.8,
          "height": 100,
          "width": 200,
          "widthFlexible": true
        },
        {
          "id": 2,
          "priority": 0.7,
          "height": 100,
          "heightFlexible": true,
          "width": 200,
          "widthFlexible": true
        },
        {
          "id": 3,
          "priority": 0.6,
          "height": 50,
          "width": 200,
          "widthFlexible": true
        },
        {
          "name": "virtual group",
          "priority": 0.5,
          "gutter": 10,
          "height": 100,
          "width": 400,
          "widthFlexible": true,
          "innerHTML": "<div style=\"background: rgba(191, 81, 236, 0.5); position: relative; top: -8px; left: -8px; height: calc(100% + 2 * 8px ); width: calc(100% + 2 * 8px ); font-size: 100px;\"><marquee title=\"old school test\">☃</marquee></div>",
          "items": [
              {
                "id": 4,
                "priority": 0.7,
                "height": 100,
                "width": 195
              },
              {
                "id": 5,
                "priority": 0.6,
                "height": 50,
                "width": 195
              }
          ]
        },
        {
          "id": 6,
          "priority": 0.5,
          "height": 150,
          "width": 400,
          "widthFlexible": true
        },
        {
          "id": 7,
          "priority": 0.4,
          "height": 150,
          "width": 350
        }
      ],
      "name": "root",
      "width": 553.5,
      "heightAuto": true
    },
    setup2: {
      gutter: 4,
      items: [
        // 011
        // 233
        // 2
        // prioritized
        //
        // 110
        // 233
        // 2
        {
          id:0,
          priority:0.9,// 0.6,
          height: 20,
          width: 100
        },
        {
          id:1,
          priority:0.8,// 0.9,
          height: 20,
          width: 100
        },
        {
          id:2,
          priority:0.6,// 0.3,
          height: 40,
          width: 180
        },
        {
          id:3,
          priority:0.4,
          height: 20,
          width: 150
        }
      ]
    }
  };
  document.addEventListener("polymer-ready", function(){
    document.querySelector("template").bindingDelegate = new PolymerExpressions();
    document.querySelector("template").model = model;

  });


  var addMore = function( button ){
      // var newOne = button.ownerDocument.createElement("div");
      // newOne.innerHTML = "<p><code>&lt;juicy-tile-grid&gt;</code> uses native CSS Grid to adapt to changes</p>";
      // button.parentNode.appendChild( newOne );
      // With !<3 to IE
      document.getElementById("ieHierarchyRequestErrorWorkaround").innerHTML += 
          "<p><code>&lt;juicy-tile-grid&gt;</code> uses native CSS Grid to adapt to changes</p>";
  };
</script>
</article>

</body>
</html>
