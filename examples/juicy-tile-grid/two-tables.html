<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>&lt;juicy-tile-editor&gt; for grid</title>
    <link rel="stylesheet" href="http://juicy.github.io/github-markdown-css/github-markdown.css">

    <!-- Importing Web Component's Polyfill
    <script src="../../platform/platform.js"></script>
    <link rel="import" href="../../polymer/polymer.html">-->
    <!-- Importing Custom Elements -->
    <link rel="import" href="../../../juicy-tile-grid/src/juicy-tile-grid.html">
    <link rel="import" href="../../../juicy-tiles-setup-sync/src/juicy-tiles-setup-sync.html">
    <link rel="import" href="../../src/juicy-tile-editor.html">

    <link rel="import" href="../../../core-localstorage/core-localstorage.html">

    <style>
        body {
            padding: 50px 20px 20px 20px;
        }

        * {
            margin: 0px;
            padding: 0px;
        }

        juicy-tile-grid {
            /*width: 300px;
    height: 150px;*/
            display: block;
            box-shadow: inset 0px 0px 10px 0px rgba(50, 50, 50, 0.6);
        }

        .markdown-body {
            margin: 2em 0 2em 250px;
        }

        .markdown-body > juicy-tile-grid {
            padding: 1em;
        }

        juicy-tile-grid > * {
            box-shadow: 0px 0px 10px 0px rgba(50, 50, 50, 0.75);
        }

        juicy-tile-grid >:first-child {
            background: lightgreen;
        }

        juicy-tile-grid >:nth-child(2) {
            /* background:lightblue; */
            background: rgba(173, 216, 230, 0.8);
        }

        juicy-tile-grid >:nth-child(3) {
            /*background:yellow;*/
            background: rgba(255, 255, 0, 0.8);
            overflow: auto;
        }

        juicy-tile-grid >:nth-child(4) {
            background: gray;
            overflow: auto;
        }

        juicy-tile-grid >:nth-child(5) {
            background: orange;
        }

        #aboveOverlay {
            position: fixed;
            z-index: 100;
        }

        .markdown-body div h4,
        .markdown-body section h4,
        .markdown-body juicy-tile-grid div p {
            margin: 0;
        }

        iframe {
            float: right;
        }
    </style>
</head>

<body>
    <article class="markdown-body">
        <iframe src="http://ghbtns.com/github-btn.html?user=juicy&amp;repo=juicy-tile-editor&amp;type=fork&amp;count=true&amp;size=medium" allowtransparency="true" frameborder="0" scrolling="0" width="90" height="30"></iframe>
        <iframe src="http://ghbtns.com/github-btn.html?user=juicy&amp;repo=juicy-tile-editor&amp;type=watch&amp;count=true&amp;size=medium" allowtransparency="true" frameborder="0" scrolling="0" width="90" height="30"></iframe>

        <template bind>
            <p>Press Ctrl or Command on your keyboard and move your mouse over an item to edit</p>
            <p>This example shows how to create two tables with dynamic heights and tiles all around.</p>
            <label>
                <input type="checkbox" checked="{{editingMode}}"> Show editor ({{editingMode}})</label>
            <template if="{{editingMode}}">
                <div id="aboveOverlay">
                    <juicy-tile-editor selectionmode></juicy-tile-editor>
                </div>
                <script>
                    document.querySelector("juicy-tile-editor").addEventListener("juicy-tile-editor-close", function(e) {
                        e.target.templateInstance.model.editingMode = false;
                    });
                </script>
            </template>

            <core-localstorage name="juicy-tiles-two-tables" value="{{storedValue}}"></core-localstorage>
            <juicy-tiles-setup-sync storedvalue="{{storedValue}}"></juicy-tiles-setup-sync>
            <juicy-tile-grid id="grid" setup="[[json]]">
                <div>A title goes here</div>
                <div>
                    <button type="button" onclick="addMore(0);">Add row to the first table</button>
                    <button type="button" onclick="addMore(1);">Add row to the second table</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>First name</th>
                            <th>Last name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Sherlock</td>
                            <td>Holmes</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>John</td>
                            <td>Watson</td>
                        </tr>
                    </tbody>
                </table>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>First name</th>
                            <th>Last name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Sherlock</td>
                            <td>Holmes</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>John</td>
                            <td>Watson</td>
                        </tr>
                    </tbody>
                </table>
                <div>Tile to occupy some space #0</div>
                <div>Tile to occupy some space #1</div>
                <div>Tile to occupy some space #2</div>
                <div>Tile to occupy some space #3</div>
            </juicy-tile-grid>
        </template>
        <script type="text/javascript">
            model = {
                editingMode: true,
                json: {
                    "gutter": 25,
                    "width": 500,
                    "items": [{
                        "gutter": 20,
                        "items": [{
                            "id": 0,
                            "priority": 1,
                            "height": 30,
                            "width": "100%",
                            "itemName": "Title",
                            "widthFlexible": true
                        }, {
                            "id": 2,
                            "priority": 0.7,
                            "height": 50,
                            "heightDynamic": true,
                            "width": "50%",
                            "itemName": "Table 1",
                            "widthFlexible": true
                        }, {
                            "id": 3,
                            "priority": 0.7,
                            "height": 50,
                            "heightDynamic": true,
                            "width": "50%",
                            "itemName": "Table 2",
                            "widthFlexible": true
                        }],
                        "id": "root_0",
                        "priority": 1,
                        "width": "75%",
                        "height": 100,
                        "itemName": "Group 1",
                        "widthFlexible": true,
                        "heightDynamic": true,
                        "tightGroup": true
                    }, {
                        "gutter": 15,
                        "items": [{
                            "id": 1,
                            "priority": 0.95,
                            "height": 30,
                            "width": "100%",
                            "itemName": "Buttons",
                            "widthFlexible": true,
                            "heightDynamic": true
                        }, {
                            "id": 4,
                            "priority": 0.8,
                            "height": 30,
                            "width": "100%",
                            "itemName": "Tile #0",
                            "widthFlexible": true
                        }],
                        "id": "root_1",
                        "priority": 0.9375,
                        "width": "25%",
                        "height": 100,
                        "itemName": "Group 2",
                        "widthFlexible": true,
                        "precalculateHeight": true,
                        "tightGroup": true
                    }, {
                        "gutter": 10,
                        "items": [{
                            "id": 5,
                            "priority": 0.8,
                            "height": 30,
                            "width": "33%",
                            "itemName": "Tile #1",
                            "widthFlexible": true
                        }, {
                            "id": 6,
                            "priority": 0.8,
                            "height": 30,
                            "width": "33%",
                            "itemName": "Tile #2",
                            "widthFlexible": true
                        }, {
                            "id": 7,
                            "priority": 0.8,
                            "height": 30,
                            "width": "33%",
                            "itemName": "Tile #3",
                            "widthFlexible": true
                        }],
                        "id": "root_2",
                        "priority": 0.8,
                        "width": "100%",
                        "height": 30,
                        "itemName": "Group 3",
                        "widthFlexible": true,
                        "tightGroup": true
                    }]
                }
            };

            model.storedValue = JSON.parse(JSON.stringify(model.json));

            document.addEventListener("polymer-ready", function() {
                document.querySelector("template").bindingDelegate = new PolymerExpressions();
                document.querySelector("template").model = model;
            });

            var addMore = function(index) {
                var tbody = document.querySelectorAll("tbody")[index];

                tbody.innerHTML += "<tr><td>x</td><td>Test</td><td>Row</td></tr>";
            };
        </script>
    </article>

</body>

</html>
